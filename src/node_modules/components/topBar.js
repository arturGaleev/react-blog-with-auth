import React, {useContext, Fragment} from 'react'
import {Link, NavLink} from 'react-router-dom'

import {CurrentUserContext} from 'context/currentUser'

const TopBar = () => {
  const [currentUserState] = useContext(CurrentUserContext)
  return (
    <div className="container">
      <nav className="navbar">
          <Link to="/" className="navbar-brand">
            ProZone
          </Link>
          <ul>
            <li>
              <NavLink to="/" exact>Главная</NavLink>
            </li>
            {currentUserState.isLoggedIn === false && (
              <Fragment>
                <li>
                  <NavLink to="/login">Вход</NavLink>
                </li>
                <li>
                  <NavLink to="/register">Регистрация</NavLink>
                </li>
              </Fragment>
            )}
            {currentUserState.isLoggedIn && (
              <Fragment>
                <li>
                  <NavLink to="/articles/new">Новая статья</NavLink>
                </li>
                <li>
                  <NavLink to={`/profiles/${currentUserState.currentUser.username}`}>
                    <img src={currentUserState.currentUser.image} alt="" />
                    &nbsp; {currentUserState.currentUser.username}
                  </NavLink>
                </li>
              </Fragment>
            )}
          </ul>
      </nav>
    </div>
  )
}

export default TopBar
