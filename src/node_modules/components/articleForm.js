import React, {useState, useEffect} from 'react'

import BackendErrorMessages from 'components/backendErrorMessages'

const ArticleForm = ({onSubmit, errors, initialValues}) => {
  const [title, setTitle] = useState('')
  const [body, setBody] = useState('')
  const [description, setDescription] = useState('')
  const [tagList, setTagList] = useState('')

  const handleSubmit = event => {
		event.preventDefault()
		const article = {
			title,
			body,
			description,
			tagList
		}
    onSubmit(article)
	}
	
	useEffect(() => {
		if (!initialValues) {
			return
		}
		setTitle(initialValues.title)
		setBody(initialValues.body)
		setDescription(initialValues.description)
		setTagList(initialValues.tagList.join(' '))

	}, [initialValues])

  return (
    <div className="editor-page">
      <div className="container">
        <div className="row">
          <div className="form-wrapper-full">
						{errors && <BackendErrorMessages backendErrors={errors} />}
            <form onSubmit={handleSubmit}>
              <p className="wrp-field">
                <input
                  type="text"
                  placeholder="Заголовок"
                  value={title}
                  onChange={e => setTitle(e.target.value)}
                />
              </p>
              <p className="wrp-field">
                <input
                  type="text"
                  placeholder="Описание"
                  value={description}
                  onChange={e => setDescription(e.target.value)}
                />
              </p>
              <p className="wrp-field">
                <textarea
                  value={body}
                  placeholder="Контент"
                  onChange={e => setBody(e.target.value)}
                  rows="8"
                />
              </p>
              <p className="wrp-field">
                <input
                  type="text"
                  placeholder="Теги"
                  value={tagList}
                  onChange={e => setTagList(e.target.value)}
                />
              </p>
              <button
                type="submit"
                className="btn btn-blue"
                // disabled={isLoading}
              >
                {/*{isLoading && <span className="btn-loader">&nbsp;</span>}*/}
                {/*{pageTitle}*/}
                Опубликовать
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  )
}

export default ArticleForm
